<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>chat-bot test</title>

    <script src="../../webcomponentsjs/webcomponents-loader.js"></script>
    <script src="../../web-component-tester/browser.js"></script>
    <link rel="import" href="../chat-bot.html">
    <script src="../models/Node.js"></script>
  </head>
  <body>

    <test-fixture id="chat-bot">
      <template>
        <chat-bot></chat-bot>
      </template>
    </test-fixture>

    <script>
      suite('chat-bot', () => {
        test('Spy getNodeToProced', () => {
          const element = fixture('chat-bot');
          const fakeNode = new Polymer.Node();
          const fakeOption = new Polymer.Node();
          
          // set a las propiedades de fakeNode
          fakeNode.question = "Texto fake";
          fakeNode.options.set('si', fakeOption);
          fakeNode.from = 'bot'
          // set a las propiedades de fakeOprion
          fakeOption.question = "Option Fake";

          const fakeNodes = [fakeNode, fakeOption]
          element.set('nodes', fakeNodes);

          assert.deepEqual(element.currentNode, fakeNode);
          element.getNodeToProced('si');
          assert.deepEqual(element.currentNode, fakeOption);
        })

        test('Spy printMessages', () => {
          const element = fixture('chat-bot');
          const fakeNode = new Polymer.Node();
          const fakeOption = new Polymer.Node();
          
          // set a las propiedades de fakeNode
          fakeNode.question = "Texto fake";
          fakeNode.options.set('si', fakeOption);
          fakeNode.from = 'bot'
          // set a las propiedades de fakeOprion
          fakeOption.question = "Option Fake";

          const fakeNodes = [fakeNode, fakeOption]
          element.set('nodes', fakeNodes);
          
          element.printButtons(fakeNode);

          assert.strictEqual(element._printButtonsObserver(), true);
          
        })
      });
    </script>

  </body>
</html>
